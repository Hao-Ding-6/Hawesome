(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{723:function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return o});var a=n(232),r=function(){return{type:a.c}},c=function(){return{type:a.b}},o=function(){return{type:a.a}}},728:function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"b",function(){return i}),n.d(t,"a",function(){return u});var a=n(26),r=n(44),c=n(722),o=n.n(c),s=function(e){if(e)return Array.isArray(e)?Object.entries(e[0]).map(function(e){return Object.assign(e[1],{id:e[0]})}):Object.entries(e).map(function(e){return Object.assign(e[1],{id:e[0]})})},i=function(e,t,n){return n.date=o()(n.date).toDate(),Object(r.a)({},n,{hostUid:e.uid,hostedBy:e.displayName,hostPhotoURL:t||"/assets/user.png",created:o()(Date.now()).toDate(),attendees:Object(a.a)({},e.uid,{going:!0,joinDate:Date.now(),photoURL:t||"/assets/user.png",displayName:e.displayName,host:!0})})},u=function(e){var t=Object.create(null);e.forEach(function(e){return t[e.id]=Object(r.a)({},e,{childNodes:[]})});var n=[];return e.forEach(function(e){e.parentId?t[e.parentId].childNodes.push(t[e.id]):n.push(t[e.id])}),n}},731:function(e,t,n){"use strict";n.d(t,"h",function(){return b}),n.d(t,"i",function(){return g}),n.d(t,"b",function(){return E}),n.d(t,"f",function(){return y}),n.d(t,"e",function(){return w}),n.d(t,"a",function(){return j}),n.d(t,"d",function(){return O}),n.d(t,"c",function(){return x}),n.d(t,"g",function(){return k});var a=n(44),r=n(26),c=n(720),o=n.n(c),s=n(730),i=n(721),u=n(722),l=n.n(u),d=n(745),p=n.n(d),h=n(127),m=n(723),f=n(265),v=n(220),b=function(e){return function(){var t=Object(i.a)(o.a.mark(function t(n,a,r){var c,i,u;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,i=c(),e.isLoaded,e.isEmpty,(u=Object(s.a)(e,["isLoaded","isEmpty"])).dateOfBirth!==a().firebase.profile.dateOfBirth&&(u.dateOfBirth=l()(u.dateOfBirth).toDate()),t.prev=4,t.next=7,i.updateProfile(u);case 7:h.toastr.success("Success","Profile updated"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),console.log(t.t0);case 13:case"end":return t.stop()}},t,this,[[4,10]])}));return function(e,n,a){return t.apply(this,arguments)}}()},g=function(e,t){return function(){var t=Object(i.a)(o.a.mark(function t(n,a,r){var c,s,i,u,l,d,h,f,v,b;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,s=r.getFirestore,i=p()(),u=c(),l=s(),d=u.auth().currentUser,h="".concat(d.uid,"/user_images"),f={name:i},t.prev=7,n(Object(m.c)()),t.next=11,u.uploadFile(h,e,null,f);case 11:return v=t.sent,t.next=14,v.uploadTaskSnapshot.ref.getDownloadURL();case 14:return b=t.sent,t.next=17,l.get("users/".concat(d.uid));case 17:if(t.sent.data().photoURL){t.next=23;break}return t.next=21,u.updateProfile({photoURL:b});case 21:return t.next=23,d.updateProfile({photoURL:b});case 23:return t.next=25,l.add({collection:"users",doc:d.uid,subcollections:[{collection:"photos"}]},{name:i,url:b});case 25:n(Object(m.b)()),t.next=33;break;case 28:throw t.prev=28,t.t0=t.catch(7),console.log(t.t0),n(Object(m.a)()),new Error("Problem uploading photo");case 33:case"end":return t.stop()}},t,this,[[7,28]])}));return function(e,n,a){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(i.a)(o.a.mark(function t(n,a,r){var c,s,i,u,l;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirebase,s=r.getFirestore,i=c(),u=s(),l=i.auth().currentUser,t.prev=4,t.next=7,i.deleteFile("".concat(l.uid,"/user_images/").concat(e.name));case 7:return t.next=9,u.delete({collection:"users",doc:l.uid,subcollections:[{collection:"photos",doc:e.id}]});case 9:t.next=15;break;case 11:throw t.prev=11,t.t0=t.catch(4),console.log(t.t0),new Error("Problem deleting photo");case 15:case"end":return t.stop()}},t,this,[[4,11]])}));return function(e,n,a){return t.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(i.a)(o.a.mark(function t(n,a){var c,s,i,u,l,d,p,h,v,b;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),n(Object(m.c)()),c=f.a.firestore(),s=f.a.auth().currentUser,i=new Date(Date.now()),u=c.collection("users").doc(s.uid),l=c.collection("event_attendee"),t.prev=7,d=c.batch(),t.next=11,d.update(u,{photoURL:e.url});case 11:return t.next=13,l.where("userUid","==",s.uid).where("eventDate",">",i);case 13:return p=t.sent,t.next=16,p.get();case 16:h=t.sent,v=0;case 18:if(!(v<h.docs.length)){t.next=29;break}return t.next=21,c.collection("events").doc(h.docs[v].data().eventId);case 21:return b=t.sent,t.next=24,b.get();case 24:t.sent.data().hostUid===s.uid?d.update(b,Object(r.a)({hostPhotoURL:e.url},"attendees.".concat(s.uid,".photoURL"),e.url)):d.update(b,Object(r.a)({},"attendees.".concat(s.uid,".photoURL"),e.url));case 26:v++,t.next=18;break;case 29:return t.next=31,d.commit();case 31:n(Object(m.b)()),t.next=39;break;case 34:throw t.prev=34,t.t0=t.catch(7),console.log(t.t0),n(Object(m.a)()),new Error("Problem setting main photo");case 39:case"end":return t.stop()}},t,this,[[7,34]])}));return function(e,n){return t.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(i.a)(o.a.mark(function t(n,a){var c,s,u,l,d,p;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(m.c)()),c=f.a.firestore(),s=f.a.auth().currentUser,u=a().firebase.profile,l={going:!0,joinDate:Date.now(),photoURL:u.photoURL||"/assets/user.png",displayName:u.displayName,host:!1},t.prev=5,d=c.collection("events").doc(e.id),p=c.collection("event_attendee").doc("".concat(e.id,"_").concat(s.uid)),t.next=10,c.runTransaction(function(){var t=Object(i.a)(o.a.mark(function t(n){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.get(d);case 2:return t.next=4,n.update(d,Object(r.a)({},"attendees.".concat(s.uid),l));case 4:return t.next=6,n.set(p,{eventId:e.id,userUid:s.uid,eventDate:e.date,host:!1});case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 10:n(Object(m.b)()),h.toastr.success("Success","You have signed up to the event"),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(5),console.log(t.t0),n(Object(m.a)()),h.toastr.error("Oops","Problem signing up to event");case 19:case"end":return t.stop()}},t,this,[[5,14]])}));return function(e,n){return t.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(i.a)(o.a.mark(function t(n,a,c){var s,i,u;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=c.getFirestore,i=s(),u=i.auth().currentUser,t.prev=3,t.next=6,i.update("events/".concat(e.id),Object(r.a)({},"attendees.".concat(u.uid),i.FieldValue.delete()));case 6:return t.next=8,i.delete("event_attendee/".concat(e.id,"_").concat(u.uid));case 8:h.toastr.success("Success","You have removed yourself from the event"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0),h.toastr.error("Oops","Problem leaving event");case 15:case"end":return t.stop()}},t,this,[[3,11]])}));return function(e,n,a){return t.apply(this,arguments)}}()},O=function(e,t){return function(){var n=Object(i.a)(o.a.mark(function n(r,c){var s,i,u,l,d,p,h,b;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r(Object(m.c)()),s=f.a.firestore(),i=new Date(Date.now()),u=s.collection("event_attendee"),n.t0=t,n.next=1===n.t0?7:2===n.t0?9:3===n.t0?11:13;break;case 7:return l=u.where("userUid","==",e).where("eventDate","<=",i).orderBy("eventDate","desc"),n.abrupt("break",15);case 9:return l=u.where("userUid","==",e).where("eventDate",">=",i).orderBy("eventDate"),n.abrupt("break",15);case 11:return l=u.where("userUid","==",e).where("host","==",!0).orderBy("eventDate","desc"),n.abrupt("break",15);case 13:return l=u.where("userUid","==",e).orderBy("eventDate","desc"),n.abrupt("break",15);case 15:return n.prev=15,n.next=18,l.get();case 18:d=n.sent,p=[],h=0;case 21:if(!(h<d.docs.length)){n.next=29;break}return n.next=24,s.collection("events").doc(d.docs[h].data().eventId).get();case 24:b=n.sent,p.push(Object(a.a)({},b.data(),{id:b.id}));case 26:h++,n.next=21;break;case 29:r({type:v.c,payload:{events:p}}),r(Object(m.b)()),n.next=37;break;case 33:n.prev=33,n.t1=n.catch(15),console.log(n.t1),r(Object(m.a)());case 37:case"end":return n.stop()}},n,this,[[15,33]])}));return function(e,t){return n.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(i.a)(o.a.mark(function t(n,a,r){var c,s,i,u;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirestore,s=c(),i=s.auth().currentUser,u={photoURL:e.photoURL||"/assets/user.png",city:e.city||"Unknown City",displayName:e.displayName},t.prev=4,t.next=7,s.set({collection:"users",doc:i.uid,subcollections:[{collection:"following",doc:e.id}]},u);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(4),console.log(t.t0);case 12:case"end":return t.stop()}},t,this,[[4,9]])}));return function(e,n,a){return t.apply(this,arguments)}}()},k=function(e){return function(){var t=Object(i.a)(o.a.mark(function t(n,a,r){var c,s,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=r.getFirestore,s=c(),i=s.auth().currentUser,t.prev=3,t.next=6,s.delete({collection:"users",doc:i.uid,subcollections:[{collection:"following",doc:e.id}]});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),console.log(t.t0);case 11:case"end":return t.stop()}},t,this,[[3,8]])}));return function(e,n,a){return t.apply(this,arguments)}}()}},734:function(e,t,n){"use strict";n.d(t,"c",function(){return v}),n.d(t,"e",function(){return b}),n.d(t,"b",function(){return g}),n.d(t,"d",function(){return E}),n.d(t,"a",function(){return y});var a=n(44),r=n(720),c=n.n(r),o=n(721),s=n(127),i=n(220),u=n(723),l=n(728),d=n(722),p=n.n(d),h=n(265),m=n(729),f=n.n(m),v=function(e){return function(){var t=Object(o.a)(c.a.mark(function t(n,a,r){var o,i,u,d,p,h;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.getFirestore,i=o(),u=i.auth().currentUser,d=a().firebase.profile.photoURL,p=Object(l.b)(u,d,e),t.prev=5,t.next=8,i.add("events",p);case 8:return h=t.sent,t.next=11,i.set("event_attendee/".concat(h.id,"_").concat(u.uid),{eventId:h.id,userUid:u.uid,eventDate:e.date,host:!0});case 11:s.toastr.success("Success!","Event has been created"),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(5),s.toastr.error("Oops!","Something went wrong");case 17:case"end":return t.stop()}},t,this,[[5,14]])}));return function(e,n,a){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(o.a)(c.a.mark(function t(n,a){var r,o,i,l,d,m,v,b;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n(Object(u.c)()),r=h.a.firestore(),e.date!==a().firestore.ordered.events[0].date&&(e.date=p()(e.date).toDate()),t.prev=3,o=r.collection("events").doc(e.id),0===f()(a().firestore.ordered.events[0].date.toDate(),e.date)){t.next=31;break}return i=r.batch(),t.next=10,i.update(o,e);case 10:return l=r.collection("event_attendee"),t.next=13,l.where("eventId","==",e.id);case 13:return d=t.sent,t.next=16,d.get();case 16:m=t.sent,v=0;case 18:if(!(v<m.docs.length)){t.next=27;break}return t.next=21,r.collection("event_attendee").doc(m.docs[v].id);case 21:return b=t.sent,t.next=24,i.update(b,{eventDate:e.date});case 24:v++,t.next=18;break;case 27:return t.next=29,i.commit();case 29:t.next=33;break;case 31:return t.next=33,o.update(e);case 33:n(Object(u.b)()),s.toastr.success("Success!","Event has been updated"),t.next=41;break;case 37:t.prev=37,t.t0=t.catch(3),n(Object(u.a)()),s.toastr.error("Oops!","Something went wrong");case 41:case"end":return t.stop()}},t,this,[[3,37]])}));return function(e,n){return t.apply(this,arguments)}}()},g=function(e,t){return function(){var n=Object(o.a)(c.a.mark(function n(a,r,o){var i,u,l;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=o.getFirestore,u=i(),l=e?"Are you sure to cancel the event?":"This will reactive the event - are you sure?";try{s.toastr.confirm(l,{onOk:function(){return u.update("events/".concat(t),{cancelled:e})}})}catch(a){console.log(a)}case 4:case"end":return n.stop()}},n,this)}));return function(e,t,a){return n.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(o.a)(c.a.mark(function t(n,r){var o,s,l,d,p,m,f,v,b;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=new Date(Date.now()),s=h.a.firestore(),l=s.collection("events"),t.prev=3,n(Object(u.c)()),t.t0=e,!t.t0){t.next=10;break}return t.next=9,s.collection("events").doc(e.id).get();case 9:t.t0=t.sent;case 10:return d=t.t0,p=e?l.where("date",">=",o).orderBy("date").startAfter(d).limit(2):l.where("date",">=",o).orderBy("date").limit(2),t.next=14,p.get();case 14:if(0!==(m=t.sent).docs.length){t.next=18;break}return n(Object(u.b)()),t.abrupt("return",m);case 18:for(f=[],v=0;v<m.docs.length;v++)b=Object(a.a)({},m.docs[v].data(),{id:m.docs[v].id}),f.push(b);return n({type:i.c,payload:{events:f}}),n(Object(u.b)()),t.abrupt("return",m);case 25:t.prev=25,t.t1=t.catch(3),console.log(t.t1),n(Object(u.a)());case 29:case"end":return t.stop()}},t,this,[[3,25]])}));return function(e,n){return t.apply(this,arguments)}}()},y=function(e,t,n){return function(){var a=Object(o.a)(c.a.mark(function a(r,o,i){var u,l,d,p,h;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return u=i.getFirebase,l=u(),d=o().firebase.profile,p=l.auth().currentUser,h={parentId:n,displayName:d.displayName,photoURL:d.photoURL||"/assets/user.png",uid:p.uid,text:t.comment,date:Date.now()},a.prev=5,a.next=8,l.push("event_chat/".concat(e),h);case 8:a.next=14;break;case 10:a.prev=10,a.t0=a.catch(5),console.log(a.t0),s.toastr.error("Oops","Problem adding comment");case 14:case"end":return a.stop()}},a,this,[[5,10]])}));return function(e,t,n){return a.apply(this,arguments)}}()}},740:function(e,t,n){"use strict";var a=n(1),r=n.n(a),c=n(110);t.a=function(e){var t=e.input,n=e.rows,a=(e.type,e.placeholder),o=e.meta,s=o.touched,i=o.error;return r.a.createElement(c.i.Field,{error:s&&!!i},r.a.createElement("textarea",Object.assign({},t,{placeholder:a,rows:n})),s&&i&&r.a.createElement(c.o,{basic:!0,color:"red"},i))}},901:function(e,t,n){"use strict";n.r(t);var a=n(720),r=n.n(a),c=n(721),o=n(123),s=n(124),i=n(229),u=n(125),l=n(230),d=n(1),p=n.n(d),h=n(126),m=n(219),f=n(73),v=n(127),b=n(110),g=n(872),E=n.n(g),y=function(){return p.a.createElement(b.l,{name:"marker",size:"big",color:"red"})};var w=function(e){var t=e.lat,n=e.lng,a=[t,n];return p.a.createElement(b.t,{attached:"bottom",style:{padding:0}},p.a.createElement("div",{style:{height:"300px",width:"100%"}},p.a.createElement(E.a,{bootstrapURLKeys:{key:"AIzaSyDgaL61tZqLxRUjDq1KaBZXk7hENz3ghTs"},defaultCenter:a,defaultZoom:14},p.a.createElement(y,{lat:t,lng:n}))))},j=n(732),O=n.n(j),x=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={showMap:!1},n.showMapToggle=function(){n.setState(function(e){return{showMap:!e.showMap}})},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentWillUnmount",value:function(){this.setState({showMap:!1})}},{key:"render",value:function(){var e,t=this.props.event;return t.date&&(e=t.date.toDate()),p.a.createElement(b.t.Group,null,p.a.createElement(b.t,{attached:"top"},p.a.createElement(b.j,null,p.a.createElement(b.j.Column,{width:1},p.a.createElement(b.l,{size:"large",color:"teal",name:"info"})),p.a.createElement(b.j.Column,{width:15},p.a.createElement("p",null,t.description)))),p.a.createElement(b.t,{attached:!0},p.a.createElement(b.j,{verticalAlign:"middle"},p.a.createElement(b.j.Column,{width:1},p.a.createElement(b.l,{name:"calendar",size:"large",color:"teal"})),p.a.createElement(b.j.Column,{width:15},p.a.createElement("span",null,O()(e,"dddd Do MMMM")," at ",O()(e,"h:mm A"))))),p.a.createElement(b.t,{attached:!0},p.a.createElement(b.j,{verticalAlign:"middle"},p.a.createElement(b.j.Column,{width:1},p.a.createElement(b.l,{name:"marker",size:"large",color:"teal"})),p.a.createElement(b.j.Column,{width:11},p.a.createElement("span",null,t.venue)),p.a.createElement(b.j.Column,{width:4},p.a.createElement(b.a,{onClick:this.showMapToggle,color:"teal",size:"tiny",content:this.state.showMap?"Hide Map":"Show Map"})))),this.state.showMap&&p.a.createElement(w,{lat:t.venueLatLng.lat,lng:t.venueLatLng.lng}))}}]),t}(d.Component),k=n(733),C=n(782),U=n.n(C),D=n(207),L=n(206),R=n(740),F=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleCommentSubmit=function(e){var t=n.props,a=t.addEventComment,r=t.reset,c=t.eventId,o=t.closeForm,s=t.parentId;a(c,e,s),r(),0!==s&&o()},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return p.a.createElement(b.i,{onSubmit:this.props.handleSubmit(this.handleCommentSubmit)},p.a.createElement(D.a,{name:"comment",type:"text",component:R.a,rows:2}),p.a.createElement(b.a,{content:"Add Reply",labelPosition:"left",icon:"edit",primary:!0}))}}]),t}(d.Component),I=Object(L.a)({Fields:"comment"})(F),M=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={showReplyForm:!1,selectedCommentId:null},n.handleOpenReplyForm=function(e){return function(){n.setState({showReplyForm:!0,selectedCommentId:e})}},n.handleCloseReplyForm=function(){n.setState({showReplyForm:!1,selectedCommentId:null})},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.addEventComment,a=t.eventId,r=t.eventChat,c=this.state,o=c.showReplyForm,s=c.selectedCommentId;return p.a.createElement("div",null,p.a.createElement(b.t,{textAlign:"center",attached:"top",inverted:!0,color:"teal",style:{border:"none"}},p.a.createElement(b.k,null,"Chat about this event")),p.a.createElement(b.t,{attached:!0},p.a.createElement(b.c.Group,null,r&&r.map(function(t){return p.a.createElement(b.c,{key:t.id},p.a.createElement(b.c.Avatar,{src:t.photoURL||"/assets/user.png"}),p.a.createElement(b.c.Content,null,p.a.createElement(b.c.Author,{as:k.a,to:"/profile/".concat(t.uid)},t.displayName),p.a.createElement(b.c.Metadata,null,p.a.createElement("div",null,U()(t.date,Date.now())," ago")),p.a.createElement(b.c.Text,null,t.text),p.a.createElement(b.c.Actions,null,p.a.createElement(b.c.Action,{onClick:e.handleOpenReplyForm(t.id)},"Reply"),o&&s===t.id&&p.a.createElement(I,{addEventComment:n,eventId:a,form:"reply_".concat(t.id),closeForm:e.handleCloseReplyForm,parentId:t.id}))),t.childNodes&&t.childNodes.map(function(t){return p.a.createElement(b.c.Group,{key:t.id},p.a.createElement(b.c,null,p.a.createElement(b.c.Avatar,{src:t.photoURL||"/assets/user.png"}),p.a.createElement(b.c.Content,null,p.a.createElement(b.c.Author,{as:k.a,to:"/profile/".concat(t.uid)},t.displayName),p.a.createElement(b.c.Metadata,null,p.a.createElement("div",null,U()(t.date,Date.now())," ago")),p.a.createElement(b.c.Text,null,t.text),p.a.createElement(b.c.Actions,null,p.a.createElement(b.c.Action,{onClick:e.handleOpenReplyForm(t.id)},"Reply"),o&&s===t.id&&p.a.createElement(I,{addEventComment:n,eventId:a,form:"reply_".concat(t.id),closeForm:e.handleCloseReplyForm,parentId:t.parentId})))))}))})),p.a.createElement(I,{parentId:0,addEventComment:n,eventId:a,form:"newComment"})))}}]),t}(d.Component),A={filter:"brightness(30%)"},N={position:"absolute",bottom:"5%",left:"5%",width:"100%",height:"auto",color:"white"};var T=function(e){var t,n=e.loading,a=e.event,r=e.isHost,c=e.isGoing,o=e.goingToEvent,s=e.cancelGoingToEvent,i=e.authenticated,u=e.openModal;return a.date&&(t=a.date.toDate()),p.a.createElement(b.t.Group,null,p.a.createElement(b.t,{basic:!0,attached:"top",style:{padding:"0"}},p.a.createElement(b.m,{src:"/assets/categoryImages/".concat(a.category,".jpg"),fluid:!0,style:A}),p.a.createElement(b.t,{basic:!0,style:N},p.a.createElement(b.n.Group,null,p.a.createElement(b.n,null,p.a.createElement(b.n.Content,null,p.a.createElement(b.k,{size:"huge",content:a.title,style:{color:"white"}}),p.a.createElement("p",null,O()(t,"dddd Do MMMM")),p.a.createElement("p",null,"Hosted by ",p.a.createElement("strong",null,a.hostedBy))))))),p.a.createElement(b.t,{attached:"bottom"},!r&&p.a.createElement("div",null,c&&!a.cancelled&&p.a.createElement(b.a,{onClick:function(){return s(a)}},"Cancel My Place"),!c&&i&&!a.cancelled&&p.a.createElement(b.a,{loading:n,onClick:function(){return o(a)},color:"teal"},"JOIN THIS EVENT"),!i&&!a.cancelled&&p.a.createElement(b.a,{loading:n,onClick:function(){return u("UnauthModal")},color:"teal"},"JOIN THIS EVENT"),a.cancelled&&!r&&p.a.createElement(b.o,{size:"large",color:"red",content:"This event has been cancelled"})),r&&p.a.createElement(b.a,{as:k.a,to:"/manage/".concat(a.id),color:"orange"},"Manage Event")))};var S=function(e){var t=e.attendees;return p.a.createElement("div",null,p.a.createElement(b.t,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal"},t&&t.length," ",t&&1===t.length?"Person":"People"," Going"),p.a.createElement(b.t,{attached:!0},p.a.createElement(b.p,{relaxed:!0,divided:!0},t&&t.map(function(e){return p.a.createElement(b.n,{key:e.id,style:{position:"relative"}},e.host&&p.a.createElement(b.o,{style:{position:"absolute"},color:"orange",ribbon:"right"},"Host"),p.a.createElement(b.n.Image,{size:"tiny",src:e.photoURL}),p.a.createElement(b.n.Content,{verticalAlign:"middle"},p.a.createElement(b.n.Header,{as:"h3"},p.a.createElement(k.a,{to:"/profile/".concat(e.id)},e.displayName))))}))))},_=n(58),P=n(728),B=n(731),G=n(734),z=n(285),H={goingToEvent:B.e,cancelGoingToEvent:B.a,addEventComment:G.a,openModal:z.b},q=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={initialLoading:!0},n}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(c.a)(r.a.mark(function e(){var t,n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.firestore,a=t.match,e.next=3,n.get("events/".concat(a.params.id));case 3:return e.sent.exists||(v.toastr.error("Not found","This is not the event you are looking for"),this.props.history.push("/error")),e.next=7,n.setListener("events/".concat(a.params.id));case 7:this.setState({initialLoading:!1});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(c.a)(r.a.mark(function e(){var t,n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.firestore,a=t.match,e.next=3,n.unsetListener("events/".concat(a.params.id));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.loading,n=e.event,a=e.auth,r=e.goingToEvent,c=e.cancelGoingToEvent,o=e.addEventComment,s=e.eventChat,i=e.openModal,u=e.requesting,l=e.match,d=n.attendees&&Object(P.c)(n.attendees).sort(function(e,t){return e.joinDate-t.joinDate}),h=n.hostUid===a.uid,f=d&&d.some(function(e){return e.id===a.uid}),v=!Object(m.isEmpty)(s)&&Object(P.a)(s),g=a.isLoaded&&!a.isEmpty;return u["events/".concat(l.params.id)]||this.state.initialLoading?p.a.createElement(_.a,{inverted:!0}):p.a.createElement(b.j,null,p.a.createElement(b.j.Column,{width:10},p.a.createElement(T,{event:n,loading:t,isHost:h,isGoing:f,goingToEvent:r,cancelGoingToEvent:c,authenticated:g,openModal:i}),p.a.createElement(x,{event:n}),g&&p.a.createElement(M,{eventChat:v,addEventComment:o,eventId:n.id})),p.a.createElement(b.j.Column,{width:6},p.a.createElement(S,{attendees:d})))}}]),t}(d.Component);t.default=Object(f.compose)(m.withFirestore,Object(h.connect)(function(e,t){var n={};return e.firestore.ordered.events&&e.firestore.ordered.events[0]&&(n=e.firestore.ordered.events[0]),{requesting:e.firestore.status.requesting,event:n,loading:e.async.loading,auth:e.firebase.auth,eventChat:!Object(m.isEmpty)(e.firebase.data.event_chat)&&Object(P.c)(e.firebase.data.event_chat[t.match.params.id])}},H),Object(m.firebaseConnect)(function(e){return e.auth.isLoaded&&!e.auth.isEmpty&&["event_chat/".concat(e.match.params.id)]}))(q)}}]);
//# sourceMappingURL=12.84a2580a.chunk.js.map